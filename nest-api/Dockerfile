FROM node:20-alpine AS dev
WORKDIR /var/www/nest-api

ENV ENV ${ENV}
ENV DOMAIN ${DOMAIN}
ENV MYSQL_DATABASE ${MYSQL_DATABASE}
ENV MYSQL_HOST ${MYSQL_HOST}
ENV MYSQL_PASSWORD ${MYSQL_PASSWORD}
ENV MYSQL_PORT ${MYSQL_PORT}
ENV MYSQL_USER ${MYSQL_USER}
ENV SMTP_HOST ${SMTP_HOST}
ENV SMTP_PASSWORD ${SMTP_PASSWORD}
ENV SMTP_PORT ${SMTP_PORT}
ENV SMTP_USER ${SMTP_USER}
ENV NODE_ENV=development

# Entrypoint will use `npm run start:debug` OR `npm run start:prod`
CMD ["sh", "run.sh"]
